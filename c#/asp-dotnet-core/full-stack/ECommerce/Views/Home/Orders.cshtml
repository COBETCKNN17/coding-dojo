<h2>Add New Order</h2>

<form action="/orders" method="POST">
    @{
        if(@TempData["quantityerror"] != null){
            <p style="color: red;">@TempData["quantityerror"]</p>
        }
    }

    <p>Customer:</p>
        <select name="customerId">
        @{
            foreach(var customer in @ViewBag.customers){
                <option value="@customer.id">@customer.name</option>
            }
        }
    </select>

    <br><br>

    <p>Quantity:</p>
    <input type="number" name="quantity" min="1" max="10" value="1">

    <br><br>

    <p>Product:</p>
    <select name="productId">
        @{
            foreach(var product in @ViewBag.products){
                <option value="@product.id">@product.name</option>
            }
        }
    </select>

    <br><br>
    
    <input type="submit" value="Order" class="btn btn-success"><br>

</form>

<h2>List of Orders</h2>

        <table class="table">
            <tr>
            <th>Customer Name</th>
            <th>Product</th>
            <th>Quantity</th>
            <th>Created At</th>
            </tr>

        @{
            foreach(var op in @ViewBag.orderProducts){
                <tr>
                    <td>@op.order.customer.name</td>
                    <td>@op.product.name</td>
                    <td>@op.order.quantity</td>
                    <td>@op.created_at</td>
                </tr>
            }
        }

            
        </table>